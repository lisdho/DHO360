<section class="dho-objetivos" id="dimensao-2-objetivos">

  <style>
    /* ===========================
       DIMENSÃO 2 | OBJETIVOS
       Padrão DHO 360
    =========================== */

    .dho-objetivos{
      padding: 28px 16px;
      --pizzaSize: 260px;
      --chartGap: 22px;
      --legendMax: 420px;

      --fg:#F5F5F7;
      --muted: rgba(255,255,255,0.70);
      --muted2: rgba(255,255,255,0.85);
      --line: rgba(255,255,255,0.10);
      --glass: rgba(255,255,255,0.06);
      --glass2: rgba(255,255,255,0.07);
      --ink: rgba(0,0,0,0.12);

      --violet1:#7c3aed;
      --violet2:#a855f7;
      --violet3:#e9d5ff;
      --blue1:#60a5fa;
    }

    .dho-objetivos-wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 18px 18px;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.06);
      box-shadow: 0 18px 44px rgba(0,0,0,0.40);
      backdrop-filter: blur(12px);
      position: relative;
      overflow: hidden;
    }

    .dho-objetivos-wrap::before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(600px 240px at 15% 8%, rgba(168,85,247,0.22), transparent 60%),
        radial-gradient(560px 240px at 85% 14%, rgba(96,165,250,0.18), transparent 62%),
        radial-gradient(520px 220px at 50% 95%, rgba(233,213,255,0.14), transparent 62%);
      pointer-events:none;
      z-index:0;
      filter: saturate(1.02);
    }

    .dho-objetivos-grid{
      position: relative;
      z-index: 1;
      display:grid;
      grid-template-columns: 1.05fr 0.95fr;
      gap: 14px;
      align-items: start;
    }

    .dho-kicker{
      font-size: 12px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.70);
      margin-bottom: 6px;
    }

    .dho-title{
      font-size: clamp(22px, 2.3vw, 34px);
      line-height: 1.15;
      font-weight: 700;
      color: #F5F5F7;
      margin: 0 0 8px 0;
    }

    .dho-subtitle{
      font-size: 15.5px;
      line-height: 1.65;
      color: rgba(255,255,255,0.85);
      text-align: justify;
      margin: 0;
    }

    .dho-card{
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.07);
      border-radius: 18px;
      padding: 14px 14px 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
    }

    .dho-card::before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(360px 180px at 18% 22%, rgba(168,85,247,0.16), transparent 62%),
        radial-gradient(360px 180px at 82% 18%, rgba(96,165,250,0.12), transparent 62%);
      pointer-events:none;
      z-index:0;
    }

    .dho-card > *{
      position: relative;
      z-index: 1;
    }

    .dho-card--chart{ width: min(860px, 100%); justify-self:center; }
    .dho-rank-card{ width: min(750px, 100%); justify-self:center; background:transparent; border:0; box-shadow:none; padding:0; }

    .dho-card-title{
      font-size: 16px;
      font-weight: 700;
      color: #F5F5F7;
      margin: 0 0 8px 0;
    }

    .dho-card-note{
      font-size: 13.5px;
      line-height: 1.55;
      color: rgba(255,255,255,0.70);
      text-align: justify;
      margin: 0;
    }

    .dho-footnote{
      font-size: 12.8px;
      line-height: 1.55;
      color: rgba(255,255,255,0.80);
      text-align: justify;
      margin: 10px 0 0 0;
    }

    .dho-plain-surface{
      border: 0 !important;
      background: transparent !important;
      padding: 0 !important;
      border-radius: 0 !important;
      box-shadow: none !important;
      backdrop-filter: none !important;
    }

    /* Ranking */
    .dho-rank{ display:grid; gap: 8px; }
    .dho-rank-item{
      display:grid;
      grid-template-columns: 30px 1fr;
      gap: 10px;
      align-items:center;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.12);
      padding: 10px 12px;
    }
    .dho-rank-item > div:first-child{
      width: 30px;
      height: 30px;
      border-radius: 10px;
      display:flex;
      align-items:center;
      justify-content:center;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.06);
      color: rgba(255,255,255,0.85);
      font-weight: 700;
      font-variant-numeric: tabular-nums;
    }
    .dho-rank-item--top{
      background: linear-gradient(135deg, rgba(168,85,247,0.20), rgba(96,165,250,0.12));
      border-color: rgba(233,213,255,0.28);
    }
    .dho-rank-item strong{ color: rgba(255,255,255,0.92); }
    .dho-rank-item span{ color: rgba(255,255,255,0.70); font-size: 13px; }

    /* Botão padrão */
    .dho-btn{
      position: relative;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      padding: 10px 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(0,0,0,0.20);
      color: rgba(255,255,255,0.88);
      cursor: pointer;
      transition: transform .18s ease, background .18s ease, border-color .18s ease;
      user-select: none;
    }
    .dho-btn::before{
      content:"";
      position:absolute;
      inset:-2px;
      border-radius: 16px;
      background: linear-gradient(90deg, transparent, rgba(233,213,255,0.18), transparent);
      transform: translateX(-40%);
      opacity: .7;
      filter: blur(0.2px);
      animation: dhoShimmer 2.6s linear infinite;
      pointer-events:none;
    }
    @keyframes dhoShimmer{
      0%{ transform: translateX(-40%); opacity:.2; }
      45%{ opacity:.85; }
      100%{ transform: translateX(40%); opacity:.2; }
    }
    .dho-btn:hover{
      transform: translateY(-1px);
      background: rgba(0,0,0,0.26);
      border-color: rgba(233,213,255,0.22);
    }

    .is-hidden{ display:none !important; }

    /* Charts */
    .dho-chart-shell{
      margin-top: 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.10);
      padding: 12px;
    }
    .dho-chart-canvas{
      width: 100%;
      height: 320px;
      display:block;
    }

    /* Prontidão (estilo print) */
    .dho-ready{
      margin-top: 10px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.10);
      overflow:hidden;
    }
    .dho-ready-row{
      display:grid;
      grid-template-columns: 1fr 220px 42px 110px;
      gap: 10px;
      align-items:center;
      padding: 10px 12px;
      border-top: 1px solid rgba(255,255,255,0.08);
    }
    .dho-ready-row:first-child{ border-top: 0; }
    .dho-ready-label{
      color: rgba(255,255,255,0.88);
      font-size: 13.5px;
      line-height: 1.35;
      text-align: left;
    }
    .dho-ready-dots{
      display:flex;
      justify-content:flex-end;
      gap: 10px;
    }
    .dho-dot{
      width: 10px; height: 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(255,255,255,0.05);
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.08);
    }
    .dho-dot.is-on{
      background: rgba(168,85,247,0.85);
      border-color: rgba(233,213,255,0.32);
      box-shadow: 0 0 0 4px rgba(168,85,247,0.10);
    }
    .dho-ready-score{
      font-variant-numeric: tabular-nums;
      font-weight: 800;
      color: rgba(255,255,255,0.90);
      text-align: right;
    }
    .dho-ready-status{
      color: rgba(255,255,255,0.70);
      font-size: 12.8px;
      text-align: right;
      white-space: nowrap;
    }

    /* Reflexão */
    .dho-flow-title{
      font-size: 26px;
      font-weight: 800;
      letter-spacing: 0.02em;
      color: rgba(232, 202, 255, 0.95);
      text-align: center;
      margin: 6px 0 0 0;
    }
    .dho-flow-top,
    .dho-flow-bottom{
      grid-column: 1 / -1;
      max-width: 860px;
      justify-self: center;
      font-size: 15px;
      line-height: 1.6;
      color: rgba(255,255,255,0.90);
      text-align: justify;
      background: transparent;
      border: 0;
      box-shadow: none;
      padding: 0;
    }

    .dho-cta{
      grid-column: 1 / -1;
      width: min(860px, 100%);
      justify-self:center;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.10);
      padding: 12px 14px;
      color: rgba(255,255,255,0.88);
      text-align: justify;
    }

    /* Full width within wrap */
    .dho-full{ grid-column: 1 / -1; }

    /* Responsive */
    @media (max-width: 920px){
      .dho-objetivos-grid{ grid-template-columns: 1fr; }
      .dho-chart-canvas{ height: 300px; }
      .dho-ready-row{ grid-template-columns: 1fr; gap: 8px; }
      .dho-ready-dots{ justify-content:flex-start; }
      .dho-ready-score, .dho-ready-status{ text-align:left; }
    }
    @media (max-width: 520px){
      .dho-objetivos-wrap{ padding: 14px 14px; border-radius: 18px; }
      .dho-card{ border-radius: 16px; }
      .dho-chart-canvas{ height: 260px; }
    }
  </style>

  <div class="dho-objetivos-wrap">
    <div class="dho-objetivos-grid">

      <!-- Header editorial -->
      <div class="dho-full">
        <div class="dho-kicker">Dimensão 2</div>
        <h2 class="dho-title">Objetivos do Negócio</h2>
        <p class="dho-subtitle">
          Os objetivos do negócio e os planos para alcançá-los estão claros. O próximo desafio é entender como sustentar a execução.
          O ponto central desta dimensão não está na definição dos objetivos, e sim na maturidade da estrutura que sustenta o percurso.
        </p>
      </div>

      <div class="dho-full dho-card">
        <h3 class="dho-card-title">Insight-chave</h3>
        <p class="dho-card-note">Objetivo não é o problema. Governança, foco e pessoas são.</p>
      </div>

      <!-- Seção 1 | Contexto do negócio -->
      <div class="dho-full dho-card">
        <h3 class="dho-card-title">Contexto do negócio</h3>
        <p class="dho-card-note">
          As empresas respondentes possuem, em média, cerca de <strong>15 colaboradores</strong>. Estruturas desse porte já demandam coordenação mínima,
          processos claros e decisões compartilhadas. Nesse contexto, informalidade excessiva deixa de ser agilidade e passa a representar risco.
        </p>
        <p class="dho-footnote">Crescimento sem estrutura cobra seu preço na execução.</p>
      </div>

      <!-- Seção 2 | Maturidade de governança -->
      <div class="dho-full dho-card dho-card--chart">
        <h3 class="dho-card-title">Maturidade de governança</h3>
        <p class="dho-card-note">
          A maior parte das empresas ainda opera em níveis iniciais de governança. Os níveis mais avançados aparecem atenuados para evidenciar
          a distância entre o estágio atual e o desejado.
        </p>

        <div class="dho-chart-shell" aria-label="Gráfico de maturidade de governança">
          <canvas id="chartGovernanca" class="dho-chart-canvas"></canvas>
        </div>

        <div class="dho-rank-card" style="margin-top:14px">
          <div class="dho-rank">
            <div class="dho-rank-item dho-rank-item--top">
              <div>1</div>
              <div><strong>Inicial</strong><br><span>66,7% das empresas</span></div>
            </div>

            <div class="dho-rank-item">
              <div>2</div>
              <div><strong>Básica</strong><br><span>33,3% das empresas</span></div>
            </div>

            <div class="dho-rank-item" style="opacity:.38">
              <div>3</div><div>Estruturada</div>
            </div>
            <div class="dho-rank-item" style="opacity:.28">
              <div>4</div><div>Avançada</div>
            </div>
            <div class="dho-rank-item" style="opacity:.22">
              <div>5</div><div>Madura</div>
            </div>
          </div>
        </div>

        <div style="text-align:center;margin-top:16px">
          <button class="dho-btn" id="btn-toggle-maturidade" type="button">
            Ver descrição de todos os níveis de maturidade
          </button>
        </div>

        <div id="descricao-maturidade" class="is-hidden" style="margin-top:14px">
          <div class="dho-card dho-plain-surface">
            <p class="dho-card-note"><strong>1º Nível | Inicial:</strong> decisões concentradas nos sócios, sem reuniões formais, contabilidade focada no fiscal, inexistência de orçamento anual, políticas e alçadas não documentadas.</p>
            <p class="dho-card-note"><strong>2º Nível | Básica:</strong> reuniões gerenciais mensais, DRE e caixa fechados até D+20, orçamento simples, responsabilidades definidas, contratos e alçadas parcialmente documentados.</p>
            <p class="dho-card-note"><strong>3º Nível | Estruturada:</strong> plano anual aprovado, orçamento e forecast revisados trimestralmente, relatórios até D+10, políticas escritas mínimas (alçadas, compras, LGPD básico), separação parcial entre propriedade e gestão.</p>
            <p class="dho-card-note"><strong>4º Nível | Avançada:</strong> conselho consultivo ativo com atas, indicadores por área, matriz de riscos e compliance operando, revisão independente ou auditoria anual, remuneração variável atrelada a metas, separação clara entre sócios e executivos.</p>
            <p class="dho-card-note"><strong>5º Nível | Madura:</strong> conselho de administração ou consultivo maduro, auditoria independente recorrente, planejamento estratégico com metas e OKRs, políticas robustas de partes relacionadas e sucessão, governança de dados e comitês ativos, transparência e prestação de contas.</p>
          </div>
        </div>

        <p class="dho-footnote"><strong>Insight:</strong> o crescimento do negócio está acontecendo antes da maturidade da governança.</p>
      </div>

      <!-- Seção 3 | Prioridades estratégicas em 12 meses -->
      <div class="dho-full dho-card dho-card--chart">
        <h3 class="dho-card-title">Prioridades estratégicas em 12 meses</h3>
        <p class="dho-card-note">
          Quando observamos as prioridades para os próximos 12 meses, a ambição se traduz em focos claros de execução.
          Aquisição de clientes e crescimento de receita lideram, seguidos por caixa e eficiência operacional.
        </p>

        <div class="dho-chart-shell" aria-label="Gráfico Top 5 objetivos">
          <canvas id="chartTop5" class="dho-chart-canvas"></canvas>
        </div>

        <p class="dho-footnote">
          <strong>Nota complementar (1 menção cada):</strong>
          Lançamento de novos produtos ou serviços; Retenção de clientes e customer success; Talentos, liderança e sucessão;
          Digitalização e automação de processos; Expansão geográfica ou novos mercados.
        </p>
      </div>

      <!-- Seção 4 | Prontidão para executar -->
      <div class="dho-full dho-card dho-card--chart">
        <h3 class="dho-card-title">Quão preparado o negócio está para entregar as prioridades?</h3>
        <p class="dho-card-note">
          Os respondentes indicam que os planos existem e que os recursos necessários estão, em grande parte, encaminhados.
          O ponto mais frágil permanece na governança e no acompanhamento contínuo da execução.
        </p>

        <div class="dho-ready" role="table" aria-label="Tabela de prontidão para execução">
          <!-- rows injected by JS -->
        </div>

        <p class="dho-footnote">
          <strong>Mini insight:</strong> quando há objetivos e recursos, o risco passa a ser humano e organizacional.
        </p>
      </div>

      <!-- Seção 5 | Barreiras -->
      <div class="dho-full dho-card dho-card--chart">
        <h3 class="dho-card-title">Barreiras que podem comprometer a entrega</h3>
        <p class="dho-card-note">
          As principais barreiras não são técnicas. Elas aparecem na forma como as pessoas se organizam, se comunicam e são lideradas.
          O entrave não está em fazer mais, e sim em fazer com clareza, foco e liderança.
        </p>

        <div class="dho-chart-shell" aria-label="Gráfico de barreiras por origem (LID vs NEG)">
          <canvas id="chartBarreiras" class="dho-chart-canvas"></canvas>
        </div>
      </div>

      <!-- Reflexão + CTA -->
      <div class="dho-full">
        <h3 class="dho-flow-title">Reflexão</h3>
      </div>

      <div class="dho-flow-top">
        O negócio tem clareza de objetivos e de quais estratégias pretende seguir. O ponto de inflexão está na coerência entre governança,
        liderança e desenvolvimento humano. Sem coerência, a barreira não é errar o caminho, é sustentar o percurso completo.
      </div>

      <div class="dho-cta">
        <strong>Pergunta ao leitor:</strong> na sua empresa, o que hoje mais ameaça a execução dos objetivos: governança, foco ou liderança?
      </div>

    </div>
  </div>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <script>
    /* ===========================
       Interações
    =========================== */
    (function(){
      const btn = document.getElementById('btn-toggle-maturidade');
      const box = document.getElementById('descricao-maturidade');
      if(btn && box){
        btn.addEventListener('click', () => {
          box.classList.toggle('is-hidden');
          btn.textContent = box.classList.contains('is-hidden')
            ? 'Ver descrição de todos os níveis de maturidade'
            : 'Ocultar descrição dos níveis de maturidade';
        });
      }
    })();

    /* ===========================
       Dados (Dimensão 2)
    =========================== */

    // Governança (%)
    const governancaLabels = ['Nível 1', 'Nível 2', 'Nível 3', 'Nível 4', 'Nível 5'];
    const governancaData = [66.67, 33.33, 0, 0, 0];

    // Top 5 objetivos (qtd)
    // Top 5 pela sua tabela: 3,3,2,2 e depois 1 (escolhendo "Lançamento..." como 5º para manter o Top 5)
    const top5Labels = [
      'Aquisição de clientes e novos canais',
      'Crescimento de receita orgânica',
      'Caixa e capital de giro',
      'Lucratividade e eficiência operacional',
      'Lançamento de novos produtos ou serviços'
    ];
    const top5Data = [3, 3, 2, 2, 1];

    // Prontidão (escala 1-5)
    const prontidaoRows = [
      { label: 'Plano tático (MVP, etapas, datas e responsáveis)', score: 5, status: 'Plano completo' },
      { label: 'Recursos financeiros', score: 4, status: 'Quase pronto' },
      { label: 'Força de trabalho e competências críticas', score: 4, status: 'Quase pronto' },
      { label: 'Infraestrutura, ferramentas e tecnologia', score: 4, status: 'Quase pronto' },
      { label: 'Parcerias e fornecedores críticos', score: 4, status: 'Quase pronto' },
      { label: 'Mapa de riscos e planos de contingência', score: 4, status: 'Quase pronto' },
      { label: 'Governança e agendas de acompanhamento (metas e indicadores)', score: 3, status: 'Plano parcial' }
    ];

    // Barreiras (LID vs NEG)
    const barreiras = [
      { label: 'Comunicação e processos desalinhados', lid: 2, neg: 1 },
      { label: 'Saída de talentos e rotatividade alta', lid: 1, neg: 1 },
      { label: 'Liderança não preparada', lid: 0, neg: 2 },
      { label: 'Excesso de iniciativas, pouca priorização', lid: 0, neg: 2 },
      { label: 'Falta de capacitação técnica', lid: 0, neg: 2 },
      { label: 'Absenteísmo e licenças não planejadas', lid: 1, neg: 0 },
      { label: 'Sobrecarga e risco de burnout', lid: 1, neg: 0 },
      { label: 'Baixo espírito de equipe', lid: 1, neg: 0 }
    ];

    /* ===========================
       Render: Prontidão
    =========================== */
    (function(){
      const table = document.querySelector('.dho-ready');
      if(!table) return;

      const mkDots = (score) => {
        const wrap = document.createElement('div');
        wrap.className = 'dho-ready-dots';
        for(let i=1;i<=5;i++){
          const dot = document.createElement('span');
          dot.className = 'dho-dot' + (i===score ? ' is-on' : '');
          wrap.appendChild(dot);
        }
        return wrap;
      };

      prontidaoRows.forEach((r, idx) => {
        const row = document.createElement('div');
        row.className = 'dho-ready-row';
        if(idx === prontidaoRows.length-1){
          row.style.boxShadow = 'inset 0 0 0 1px rgba(168,85,247,0.16)';
          row.style.background = 'linear-gradient(135deg, rgba(168,85,247,0.10), rgba(96,165,250,0.06))';
        }

        const c1 = document.createElement('div');
        c1.className = 'dho-ready-label';
        c1.textContent = r.label;

        const c2 = mkDots(r.score);

        const c3 = document.createElement('div');
        c3.className = 'dho-ready-score';
        c3.textContent = String(r.score);

        const c4 = document.createElement('div');
        c4.className = 'dho-ready-status';
        c4.textContent = r.status;

        row.appendChild(c1);
        row.appendChild(c2);
        row.appendChild(c3);
        row.appendChild(c4);

        table.appendChild(row);
      });
    })();

    /* ===========================
       Render: Charts
    =========================== */
    (function(){
      if(typeof Chart === 'undefined') return;

      // Shared styling (sem estourar branco)
      const tickColor = 'rgba(255,255,255,0.72)';
      const gridColor = 'rgba(255,255,255,0.10)';
      const titleColor = 'rgba(255,255,255,0.86)';

      // Governança
      const ctxGov = document.getElementById('chartGovernanca');
      if(ctxGov){
        new Chart(ctxGov, {
          type: 'bar',
          data: {
            labels: governancaLabels,
            datasets: [{
              label: '% de empresas',
              data: governancaData,
              borderWidth: 1,
              borderColor: 'rgba(233,213,255,0.28)',
              backgroundColor: [
                'rgba(168,85,247,0.55)',
                'rgba(96,165,250,0.35)',
                'rgba(255,255,255,0.10)',
                'rgba(255,255,255,0.08)',
                'rgba(255,255,255,0.06)'
              ]
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: { display: false },
              tooltip: {
                callbacks: {
                  label: (ctx) => `${ctx.raw.toFixed(2)}%`
                }
              }
            },
            scales: {
              x: {
                ticks: { color: tickColor },
                grid: { color: 'rgba(255,255,255,0.06)' }
              },
              y: {
                beginAtZero: true,
                max: 100,
                ticks: { color: tickColor, callback: (v) => v + '%' },
                grid: { color: gridColor }
              }
            }
          }
        });
      }

      // Top 5 objetivos
      const ctxTop5 = document.getElementById('chartTop5');
      if(ctxTop5){
        new Chart(ctxTop5, {
          type: 'bar',
          data: {
            labels: top5Labels,
            datasets: [{
              label: 'Menções',
              data: top5Data,
              borderWidth: 1,
              borderColor: 'rgba(233,213,255,0.24)',
              backgroundColor: 'rgba(168,85,247,0.40)'
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: { display: false }
            },
            scales: {
              x: {
                ticks: { color: tickColor, maxRotation: 0, autoSkip: false },
                grid: { display: false }
              },
              y: {
                beginAtZero: true,
                ticks: { color: tickColor, precision: 0 },
                grid: { color: gridColor }
              }
            }
          }
        });
      }

      // Barreiras (horizontal empilhado: LID vs NEG)
      const ctxBar = document.getElementById('chartBarreiras');
      if(ctxBar){
        const labels = barreiras.map(b => b.label);
        const lid = barreiras.map(b => b.lid);
        const neg = barreiras.map(b => b.neg);

        new Chart(ctxBar, {
          type: 'bar',
          data: {
            labels,
            datasets: [
              {
                label: 'LID',
                data: lid,
                borderWidth: 1,
                borderColor: 'rgba(96,165,250,0.30)',
                backgroundColor: 'rgba(96,165,250,0.32)',
                stack: 'stack1'
              },
              {
                label: 'NEG',
                data: neg,
                borderWidth: 1,
                borderColor: 'rgba(168,85,247,0.28)',
                backgroundColor: 'rgba(168,85,247,0.32)',
                stack: 'stack1'
              }
            ]
          },
          options: {
            indexAxis: 'y',
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                labels: { color: tickColor }
              }
            },
            scales: {
              x: {
                beginAtZero: true,
                ticks: { color: tickColor, precision: 0 },
                grid: { color: gridColor }
              },
              y: {
                ticks: { color: tickColor },
                grid: { display: false }
              }
            }
          }
        });
      }

      // Ajuste fino de altura no horizontal
      const barCanvas = document.getElementById('chartBarreiras');
      if(barCanvas){
        // aumenta altura conforme quantidade de itens (leve, sem quebrar mobile)
        const h = Math.max(320, barreiras.length * 34);
        barCanvas.style.height = h + 'px';
        barCanvas.parentElement.style.height = h + 'px';
      }

    })();
  </script>

</section>
